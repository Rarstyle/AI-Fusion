{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///home/gurban/Desktop/3_1/Project/AI-Fusion/frontend/src/lib/poseDetection.ts"],"sourcesContent":["import {\n  PoseLandmarker,\n  FilesetResolver,\n  PoseLandmarkerResult,\n} from \"@mediapipe/tasks-vision\";\n\nexport interface PoseLandmark {\n  x: number;\n  y: number;\n  z: number;\n  visibility?: number;\n}\n\nexport class PoseDetectionService {\n  private poseLandmarker: PoseLandmarker | null = null;\n  private initialized = false;\n\n  async initialize() {\n    if (this.initialized) return;\n\n    try {\n      const vision = await FilesetResolver.forVisionTasks(\n        \"https://cdn.jsdelivr.net/npm/@mediapipe/tasks-vision@0.10.0/wasm\",\n      );\n\n      this.poseLandmarker = await PoseLandmarker.createFromOptions(vision, {\n        baseOptions: {\n          modelAssetPath:\n            \"https://storage.googleapis.com/mediapipe-models/pose_landmarker/pose_landmarker_lite/float16/1/pose_landmarker_lite.task\",\n          delegate: \"GPU\",\n        },\n        runningMode: \"VIDEO\",\n        numPoses: 1,\n        minPoseDetectionConfidence: 0.5,\n        minPosePresenceConfidence: 0.5,\n        minTrackingConfidence: 0.5,\n      });\n\n      this.initialized = true;\n    } catch (error) {\n      console.error(\"Failed to initialize pose detection:\", error);\n      throw error;\n    }\n  }\n\n  async detectPose(\n    video: HTMLVideoElement,\n    timestamp: number,\n  ): Promise<PoseLandmarkerResult | null> {\n    if (!this.poseLandmarker || !this.initialized) {\n      throw new Error(\"Pose detection not initialized\");\n    }\n\n    try {\n      return this.poseLandmarker.detectForVideo(video, timestamp);\n    } catch (error) {\n      console.error(\"Error detecting pose:\", error);\n      return null;\n    }\n  }\n\n  close() {\n    if (this.poseLandmarker) {\n      this.poseLandmarker.close();\n      this.poseLandmarker = null;\n      this.initialized = false;\n    }\n  }\n}\n\n// Utility functions for calculating angles and distances\nexport function calculateAngle(\n  a: PoseLandmark,\n  b: PoseLandmark,\n  c: PoseLandmark,\n): number {\n  const radians =\n    Math.atan2(c.y - b.y, c.x - b.x) - Math.atan2(a.y - b.y, a.x - b.x);\n  let angle = Math.abs((radians * 180.0) / Math.PI);\n\n  if (angle > 180.0) {\n    angle = 360 - angle;\n  }\n\n  return angle;\n}\n\nexport function calculateDistance(a: PoseLandmark, b: PoseLandmark): number {\n  return Math.sqrt(\n    Math.pow(b.x - a.x, 2) + Math.pow(b.y - a.y, 2) + Math.pow(b.z - a.z, 2),\n  );\n}\n\nexport function isLandmarkVisible(\n  landmark: PoseLandmark,\n  threshold = 0.5,\n): boolean {\n  return landmark.visibility !== undefined && landmark.visibility > threshold;\n}\n\n// MediaPipe Pose Landmark indices\nexport const PoseLandmarkIndices = {\n  NOSE: 0,\n  LEFT_EYE_INNER: 1,\n  LEFT_EYE: 2,\n  LEFT_EYE_OUTER: 3,\n  RIGHT_EYE_INNER: 4,\n  RIGHT_EYE: 5,\n  RIGHT_EYE_OUTER: 6,\n  LEFT_EAR: 7,\n  RIGHT_EAR: 8,\n  MOUTH_LEFT: 9,\n  MOUTH_RIGHT: 10,\n  LEFT_SHOULDER: 11,\n  RIGHT_SHOULDER: 12,\n  LEFT_ELBOW: 13,\n  RIGHT_ELBOW: 14,\n  LEFT_WRIST: 15,\n  RIGHT_WRIST: 16,\n  LEFT_PINKY: 17,\n  RIGHT_PINKY: 18,\n  LEFT_INDEX: 19,\n  RIGHT_INDEX: 20,\n  LEFT_THUMB: 21,\n  RIGHT_THUMB: 22,\n  LEFT_HIP: 23,\n  RIGHT_HIP: 24,\n  LEFT_KNEE: 25,\n  RIGHT_KNEE: 26,\n  LEFT_ANKLE: 27,\n  RIGHT_ANKLE: 28,\n  LEFT_HEEL: 29,\n  RIGHT_HEEL: 30,\n  LEFT_FOOT_INDEX: 31,\n  RIGHT_FOOT_INDEX: 32,\n};\n"],"names":[],"mappings":";;;;;;;;;;;;AAAA;;AAaO,MAAM;IACH,iBAAwC,KAAK;IAC7C,cAAc,MAAM;IAE5B,MAAM,aAAa;QACjB,IAAI,IAAI,CAAC,WAAW,EAAE;QAEtB,IAAI;YACF,MAAM,SAAS,MAAM,+LAAe,CAAC,cAAc,CACjD;YAGF,IAAI,CAAC,cAAc,GAAG,MAAM,8LAAc,CAAC,iBAAiB,CAAC,QAAQ;gBACnE,aAAa;oBACX,gBACE;oBACF,UAAU;gBACZ;gBACA,aAAa;gBACb,UAAU;gBACV,4BAA4B;gBAC5B,2BAA2B;gBAC3B,uBAAuB;YACzB;YAEA,IAAI,CAAC,WAAW,GAAG;QACrB,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,wCAAwC;YACtD,MAAM;QACR;IACF;IAEA,MAAM,WACJ,KAAuB,EACvB,SAAiB,EACqB;QACtC,IAAI,CAAC,IAAI,CAAC,cAAc,IAAI,CAAC,IAAI,CAAC,WAAW,EAAE;YAC7C,MAAM,IAAI,MAAM;QAClB;QAEA,IAAI;YACF,OAAO,IAAI,CAAC,cAAc,CAAC,cAAc,CAAC,OAAO;QACnD,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,yBAAyB;YACvC,OAAO;QACT;IACF;IAEA,QAAQ;QACN,IAAI,IAAI,CAAC,cAAc,EAAE;YACvB,IAAI,CAAC,cAAc,CAAC,KAAK;YACzB,IAAI,CAAC,cAAc,GAAG;YACtB,IAAI,CAAC,WAAW,GAAG;QACrB;IACF;AACF;AAGO,SAAS,eACd,CAAe,EACf,CAAe,EACf,CAAe;IAEf,MAAM,UACJ,KAAK,KAAK,CAAC,EAAE,CAAC,GAAG,EAAE,CAAC,EAAE,EAAE,CAAC,GAAG,EAAE,CAAC,IAAI,KAAK,KAAK,CAAC,EAAE,CAAC,GAAG,EAAE,CAAC,EAAE,EAAE,CAAC,GAAG,EAAE,CAAC;IACpE,IAAI,QAAQ,KAAK,GAAG,CAAC,AAAC,UAAU,QAAS,KAAK,EAAE;IAEhD,IAAI,QAAQ,OAAO;QACjB,QAAQ,MAAM;IAChB;IAEA,OAAO;AACT;AAEO,SAAS,kBAAkB,CAAe,EAAE,CAAe;IAChE,OAAO,KAAK,IAAI,CACd,KAAK,GAAG,CAAC,EAAE,CAAC,GAAG,EAAE,CAAC,EAAE,KAAK,KAAK,GAAG,CAAC,EAAE,CAAC,GAAG,EAAE,CAAC,EAAE,KAAK,KAAK,GAAG,CAAC,EAAE,CAAC,GAAG,EAAE,CAAC,EAAE;AAE1E;AAEO,SAAS,kBACd,QAAsB,EACtB,YAAY,GAAG;IAEf,OAAO,SAAS,UAAU,KAAK,aAAa,SAAS,UAAU,GAAG;AACpE;AAGO,MAAM,sBAAsB;IACjC,MAAM;IACN,gBAAgB;IAChB,UAAU;IACV,gBAAgB;IAChB,iBAAiB;IACjB,WAAW;IACX,iBAAiB;IACjB,UAAU;IACV,WAAW;IACX,YAAY;IACZ,aAAa;IACb,eAAe;IACf,gBAAgB;IAChB,YAAY;IACZ,aAAa;IACb,YAAY;IACZ,aAAa;IACb,YAAY;IACZ,aAAa;IACb,YAAY;IACZ,aAAa;IACb,YAAY;IACZ,aAAa;IACb,UAAU;IACV,WAAW;IACX,WAAW;IACX,YAAY;IACZ,YAAY;IACZ,aAAa;IACb,WAAW;IACX,YAAY;IACZ,iBAAiB;IACjB,kBAAkB;AACpB","debugId":null}},
    {"offset": {"line": 114, "column": 0}, "map": {"version":3,"sources":["file:///home/gurban/Desktop/3_1/Project/AI-Fusion/frontend/src/lib/formAnalysis.ts"],"sourcesContent":["import { ExerciseType, FormFeedback } from \"@/types/exercise\";\nimport {\n  PoseLandmark,\n  calculateAngle,\n  PoseLandmarkIndices as PLI,\n  isLandmarkVisible,\n} from \"./poseDetection\";\n\ninterface ExerciseState {\n  phase: \"up\" | \"down\" | \"neutral\";\n  repCount: number;\n  lastPhaseChange: number;\n  minAngleThisRep?: number;\n  maxAngleThisRep?: number;\n}\n\nexport class FormAnalyzer {\n  private state: ExerciseState = {\n    phase: \"neutral\",\n    repCount: 0,\n    lastPhaseChange: Date.now(),\n  };\n\n  private exerciseType: ExerciseType;\n\n  constructor(exerciseType: ExerciseType) {\n    this.exerciseType = exerciseType;\n  }\n\n  reset() {\n    this.state = {\n      phase: \"neutral\",\n      repCount: 0,\n      lastPhaseChange: Date.now(),\n    };\n  }\n\n  analyze(\n    landmarks: PoseLandmark[],\n    timestamp: number,\n  ): {\n    feedback: FormFeedback[];\n    repCounted: boolean;\n    phase: string;\n  } {\n    switch (this.exerciseType) {\n      case \"squat\":\n        return this.analyzeSquat(landmarks, timestamp);\n      case \"deadlift\":\n        return this.analyzeDeadlift(landmarks, timestamp);\n      case \"pushup\":\n        return this.analyzePushup(landmarks, timestamp);\n      case \"row\":\n        return this.analyzeRow(landmarks, timestamp);\n      case \"overhead-press\":\n        return this.analyzeOverheadPress(landmarks, timestamp);\n      default:\n        return { feedback: [], repCounted: false, phase: \"neutral\" };\n    }\n  }\n\n  private analyzeSquat(landmarks: PoseLandmark[], timestamp: number) {\n    const feedback: FormFeedback[] = [];\n    let repCounted = false;\n\n    // Get key landmarks\n    const leftHip = landmarks[PLI.LEFT_HIP];\n    const leftKnee = landmarks[PLI.LEFT_KNEE];\n    const leftAnkle = landmarks[PLI.LEFT_ANKLE];\n    const rightKnee = landmarks[PLI.RIGHT_KNEE];\n    const leftShoulder = landmarks[PLI.LEFT_SHOULDER];\n\n    if (\n      !isLandmarkVisible(leftHip) ||\n      !isLandmarkVisible(leftKnee) ||\n      !isLandmarkVisible(leftAnkle)\n    ) {\n      return { feedback, repCounted, phase: this.state.phase };\n    }\n\n    // Calculate knee angle\n    const kneeAngle = calculateAngle(leftHip, leftKnee, leftAnkle);\n\n    // Track min angle during descent\n    if (!this.state.minAngleThisRep || kneeAngle < this.state.minAngleThisRep) {\n      this.state.minAngleThisRep = kneeAngle;\n    }\n\n    // Check for depth\n    const hipBelowKnee = leftHip.y > leftKnee.y;\n\n    // Phase detection\n    if (kneeAngle < 100 && this.state.phase !== \"down\") {\n      this.state.phase = \"down\";\n      this.state.lastPhaseChange = timestamp;\n    } else if (kneeAngle > 160 && this.state.phase === \"down\") {\n      // Rep completed\n      if (this.state.minAngleThisRep && this.state.minAngleThisRep < 100) {\n        this.state.repCount++;\n        repCounted = true;\n        feedback.push({\n          timestamp,\n          message: \"‚úì Good rep\",\n          severity: \"info\",\n          type: \"rep_counted\",\n        });\n      } else {\n        feedback.push({\n          timestamp,\n          message: \"Insufficient depth\",\n          severity: \"warning\",\n          type: \"depth\",\n        });\n      }\n      this.state.phase = \"up\";\n      this.state.minAngleThisRep = undefined;\n    }\n\n    // Form checks\n    // Check knee valgus (knees caving)\n    const kneeDistance = Math.abs(leftKnee.x - rightKnee.x);\n    const hipDistance = Math.abs(leftHip.x - landmarks[PLI.RIGHT_HIP].x);\n\n    if (kneeDistance < hipDistance * 0.8 && this.state.phase === \"down\") {\n      feedback.push({\n        timestamp,\n        message: \"‚ö†Ô∏è Knees caving inward\",\n        severity: \"warning\",\n        type: \"knee_valgus\",\n      });\n    }\n\n    // Check forward lean (simplified)\n    const shoulderToHipAngle = Math.abs(leftShoulder.x - leftHip.x);\n    if (shoulderToHipAngle > 0.15 && this.state.phase === \"down\") {\n      feedback.push({\n        timestamp,\n        message: \"‚ö†Ô∏è Excessive forward lean\",\n        severity: \"warning\",\n        type: \"forward_lean\",\n      });\n    }\n\n    return { feedback, repCounted, phase: this.state.phase };\n  }\n\n  private analyzeDeadlift(landmarks: PoseLandmark[], timestamp: number) {\n    const feedback: FormFeedback[] = [];\n    let repCounted = false;\n\n    const leftHip = landmarks[PLI.LEFT_HIP];\n    const leftShoulder = landmarks[PLI.LEFT_SHOULDER];\n    const leftKnee = landmarks[PLI.LEFT_KNEE];\n\n    if (!isLandmarkVisible(leftHip) || !isLandmarkVisible(leftShoulder)) {\n      return { feedback, repCounted, phase: this.state.phase };\n    }\n\n    // Hip angle for phase detection\n    const hipHeight = leftHip.y;\n\n    if (hipHeight < 0.6 && this.state.phase !== \"down\") {\n      this.state.phase = \"down\";\n      this.state.lastPhaseChange = timestamp;\n    } else if (hipHeight > 0.8 && this.state.phase === \"down\") {\n      this.state.repCount++;\n      repCounted = true;\n      this.state.phase = \"up\";\n      feedback.push({\n        timestamp,\n        message: \"‚úì Rep completed\",\n        severity: \"info\",\n        type: \"rep_counted\",\n      });\n    }\n\n    // Check back rounding (simplified - shoulder ahead of hip)\n    const backAngle = Math.abs(leftShoulder.x - leftHip.x);\n    if (backAngle > 0.2 && this.state.phase === \"down\") {\n      feedback.push({\n        timestamp,\n        message: \"‚ö†Ô∏è Keep back neutral\",\n        severity: \"warning\",\n        type: \"back_rounding\",\n      });\n    }\n\n    return { feedback, repCounted, phase: this.state.phase };\n  }\n\n  private analyzePushup(landmarks: PoseLandmark[], timestamp: number) {\n    const feedback: FormFeedback[] = [];\n    let repCounted = false;\n\n    const leftShoulder = landmarks[PLI.LEFT_SHOULDER];\n    const leftElbow = landmarks[PLI.LEFT_ELBOW];\n    const leftWrist = landmarks[PLI.LEFT_WRIST];\n    const leftHip = landmarks[PLI.LEFT_HIP];\n\n    if (\n      !isLandmarkVisible(leftShoulder) ||\n      !isLandmarkVisible(leftElbow) ||\n      !isLandmarkVisible(leftWrist)\n    ) {\n      return { feedback, repCounted, phase: this.state.phase };\n    }\n\n    // Calculate elbow angle\n    const elbowAngle = calculateAngle(leftShoulder, leftElbow, leftWrist);\n\n    // Track angles\n    if (\n      !this.state.minAngleThisRep ||\n      elbowAngle < this.state.minAngleThisRep\n    ) {\n      this.state.minAngleThisRep = elbowAngle;\n    }\n\n    // Phase detection\n    if (elbowAngle < 90 && this.state.phase !== \"down\") {\n      this.state.phase = \"down\";\n      this.state.lastPhaseChange = timestamp;\n    } else if (elbowAngle > 160 && this.state.phase === \"down\") {\n      if (this.state.minAngleThisRep && this.state.minAngleThisRep < 90) {\n        this.state.repCount++;\n        repCounted = true;\n        feedback.push({\n          timestamp,\n          message: \"‚úì Good rep\",\n          severity: \"info\",\n          type: \"rep_counted\",\n        });\n      } else {\n        feedback.push({\n          timestamp,\n          message: \"Go deeper\",\n          severity: \"warning\",\n          type: \"depth\",\n        });\n      }\n      this.state.phase = \"up\";\n      this.state.minAngleThisRep = undefined;\n    }\n\n    // Check for sagging hips\n    const shoulderHipDistance = Math.abs(leftShoulder.y - leftHip.y);\n    if (shoulderHipDistance < 0.15) {\n      feedback.push({\n        timestamp,\n        message: \"‚ö†Ô∏è Hips sagging\",\n        severity: \"warning\",\n        type: \"hip_sag\",\n      });\n    }\n\n    return { feedback, repCounted, phase: this.state.phase };\n  }\n\n  private analyzeRow(landmarks: PoseLandmark[], timestamp: number) {\n    const feedback: FormFeedback[] = [];\n    let repCounted = false;\n\n    const leftShoulder = landmarks[PLI.LEFT_SHOULDER];\n    const leftElbow = landmarks[PLI.LEFT_ELBOW];\n    const leftWrist = landmarks[PLI.LEFT_WRIST];\n\n    if (\n      !isLandmarkVisible(leftShoulder) ||\n      !isLandmarkVisible(leftElbow) ||\n      !isLandmarkVisible(leftWrist)\n    ) {\n      return { feedback, repCounted, phase: this.state.phase };\n    }\n\n    // Simple elbow position tracking\n    const elbowBehindShoulder = leftElbow.x < leftShoulder.x - 0.1;\n\n    if (elbowBehindShoulder && this.state.phase !== \"down\") {\n      this.state.phase = \"down\";\n      this.state.lastPhaseChange = timestamp;\n    } else if (!elbowBehindShoulder && this.state.phase === \"down\") {\n      this.state.repCount++;\n      repCounted = true;\n      this.state.phase = \"up\";\n      feedback.push({\n        timestamp,\n        message: \"‚úì Rep completed\",\n        severity: \"info\",\n        type: \"rep_counted\",\n      });\n    }\n\n    return { feedback, repCounted, phase: this.state.phase };\n  }\n\n  private analyzeOverheadPress(landmarks: PoseLandmark[], timestamp: number) {\n    const feedback: FormFeedback[] = [];\n    let repCounted = false;\n\n    const leftShoulder = landmarks[PLI.LEFT_SHOULDER];\n    const leftElbow = landmarks[PLI.LEFT_ELBOW];\n    const leftWrist = landmarks[PLI.LEFT_WRIST];\n\n    if (\n      !isLandmarkVisible(leftShoulder) ||\n      !isLandmarkVisible(leftElbow) ||\n      !isLandmarkVisible(leftWrist)\n    ) {\n      return { feedback, repCounted, phase: this.state.phase };\n    }\n\n    const elbowAngle = calculateAngle(leftShoulder, leftElbow, leftWrist);\n\n    // Arms overhead (locked out)\n    if (\n      leftWrist.y < leftShoulder.y - 0.2 &&\n      elbowAngle > 160 &&\n      this.state.phase !== \"up\"\n    ) {\n      this.state.phase = \"up\";\n      this.state.lastPhaseChange = timestamp;\n    } else if (leftWrist.y > leftShoulder.y && this.state.phase === \"up\") {\n      this.state.repCount++;\n      repCounted = true;\n      this.state.phase = \"down\";\n      feedback.push({\n        timestamp,\n        message: \"‚úì Rep completed\",\n        severity: \"info\",\n        type: \"rep_counted\",\n      });\n    }\n\n    return { feedback, repCounted, phase: this.state.phase };\n  }\n\n  getRepCount(): number {\n    return this.state.repCount;\n  }\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 419, "column": 0}, "map": {"version":3,"sources":["file:///home/gurban/Desktop/3_1/Project/AI-Fusion/frontend/src/components/WorkoutCamera.tsx"],"sourcesContent":["\"use client\";\n\nimport { useEffect, useRef, useState, useCallback } from \"react\";\nimport { ExerciseType, FormFeedback, RepData } from \"@/types/exercise\";\nimport { PoseDetectionService } from \"@/lib/poseDetection\";\nimport { FormAnalyzer } from \"@/lib/formAnalysis\";\n\ninterface WorkoutCameraProps {\n  exerciseId: ExerciseType;\n  onComplete: (reps: RepData[], allFeedback: FormFeedback[]) => void;\n}\n\nexport default function WorkoutCamera({\n  exerciseId,\n  onComplete,\n}: WorkoutCameraProps) {\n  const videoRef = useRef<HTMLVideoElement>(null);\n  const canvasRef = useRef<HTMLCanvasElement>(null);\n  const [isLoading, setIsLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n  const [repCount, setRepCount] = useState(0);\n  const [currentFeedback, setCurrentFeedback] = useState<FormFeedback[]>([]);\n  const [phase, setPhase] = useState<string>(\"neutral\");\n  const [isActive, setIsActive] = useState(false);\n\n  const poseServiceRef = useRef<PoseDetectionService | null>(null);\n  const formAnalyzerRef = useRef<FormAnalyzer | null>(null);\n  const animationFrameRef = useRef<number | null>(null);\n  const allFeedbackRef = useRef<FormFeedback[]>([]);\n  const repsDataRef = useRef<RepData[]>([]);\n  const streamRef = useRef<MediaStream | null>(null);\n\n  // Initialize camera and pose detection\n  useEffect(() => {\n    let mounted = true;\n\n    async function setup() {\n      try {\n        // Request camera access\n        const stream = await navigator.mediaDevices.getUserMedia({\n          video: {\n            width: { ideal: 1280 },\n            height: { ideal: 720 },\n            facingMode: \"user\",\n          },\n          audio: false,\n        });\n\n        if (!mounted) {\n          stream.getTracks().forEach((track) => track.stop());\n          return;\n        }\n\n        streamRef.current = stream;\n\n        if (videoRef.current) {\n          videoRef.current.srcObject = stream;\n          await new Promise((resolve) => {\n            if (videoRef.current) {\n              videoRef.current.onloadedmetadata = resolve;\n            }\n          });\n          await videoRef.current.play();\n        }\n\n        // Initialize pose detection\n        const poseService = new PoseDetectionService();\n        await poseService.initialize();\n        poseServiceRef.current = poseService;\n\n        // Initialize form analyzer\n        formAnalyzerRef.current = new FormAnalyzer(exerciseId);\n\n        if (mounted) {\n          setIsLoading(false);\n          setIsActive(true);\n        }\n      } catch (err) {\n        console.error(\"Setup error:\", err);\n        if (mounted) {\n          setError(\n            \"Failed to access camera or initialize pose detection. Please check permissions.\",\n          );\n          setIsLoading(false);\n        }\n      }\n    }\n\n    setup();\n\n    return () => {\n      mounted = false;\n      if (streamRef.current) {\n        streamRef.current.getTracks().forEach((track) => track.stop());\n      }\n      if (poseServiceRef.current) {\n        poseServiceRef.current.close();\n      }\n      if (animationFrameRef.current) {\n        cancelAnimationFrame(animationFrameRef.current);\n      }\n    };\n  }, [exerciseId]);\n\n  // Detection loop\n  useEffect(() => {\n    if (\n      !isActive ||\n      !videoRef.current ||\n      !poseServiceRef.current ||\n      !formAnalyzerRef.current\n    ) {\n      return;\n    }\n\n    let lastTimestamp = 0;\n\n    async function detectLoop() {\n      if (\n        !videoRef.current ||\n        !poseServiceRef.current ||\n        !formAnalyzerRef.current ||\n        !isActive\n      ) {\n        return;\n      }\n\n      const video = videoRef.current;\n      const now = performance.now();\n\n      try {\n        // Detect pose\n        const result = await poseServiceRef.current.detectPose(video, now);\n\n        if (result && result.landmarks && result.landmarks.length > 0) {\n          const landmarks = result.landmarks[0];\n\n          // Analyze form\n          const analysis = formAnalyzerRef.current.analyze(\n            landmarks,\n            Date.now(),\n          );\n\n          // Update feedback\n          if (analysis.feedback.length > 0) {\n            setCurrentFeedback((prev) => {\n              const newFeedback = [...analysis.feedback];\n              allFeedbackRef.current.push(...newFeedback);\n              return newFeedback;\n            });\n\n            // Clear feedback after a delay\n            setTimeout(() => {\n              setCurrentFeedback([]);\n            }, 2000);\n          }\n\n          // Update rep count\n          if (analysis.repCounted) {\n            const newRepCount = formAnalyzerRef.current.getRepCount();\n            setRepCount(newRepCount);\n\n            // Store rep data\n            repsDataRef.current.push({\n              repNumber: newRepCount,\n              valid: true,\n              feedback: analysis.feedback,\n              timestamp: Date.now(),\n            });\n          }\n\n          // Update phase\n          setPhase(analysis.phase);\n\n          // Draw skeleton\n          drawSkeleton(landmarks);\n        }\n\n        lastTimestamp = now;\n      } catch (err) {\n        console.error(\"Detection error:\", err);\n      }\n\n      animationFrameRef.current = requestAnimationFrame(detectLoop);\n    }\n\n    detectLoop();\n\n    return () => {\n      if (animationFrameRef.current) {\n        cancelAnimationFrame(animationFrameRef.current);\n      }\n    };\n  }, [isActive]);\n\n  const drawSkeleton = useCallback((landmarks: any[]) => {\n    const canvas = canvasRef.current;\n    const video = videoRef.current;\n    if (!canvas || !video) return;\n\n    const ctx = canvas.getContext(\"2d\");\n    if (!ctx) return;\n\n    canvas.width = video.videoWidth;\n    canvas.height = video.videoHeight;\n\n    ctx.clearRect(0, 0, canvas.width, canvas.height);\n\n    // Draw landmarks\n    ctx.fillStyle = \"#00FF00\";\n    landmarks.forEach((landmark) => {\n      const x = landmark.x * canvas.width;\n      const y = landmark.y * canvas.height;\n      ctx.beginPath();\n      ctx.arc(x, y, 5, 0, 2 * Math.PI);\n      ctx.fill();\n    });\n\n    // Draw connections (simplified)\n    ctx.strokeStyle = \"#00FF00\";\n    ctx.lineWidth = 2;\n    const connections = [\n      [11, 12],\n      [11, 13],\n      [13, 15],\n      [12, 14],\n      [14, 16], // Arms\n      [11, 23],\n      [12, 24],\n      [23, 24], // Torso\n      [23, 25],\n      [25, 27],\n      [24, 26],\n      [26, 28], // Legs\n    ];\n\n    connections.forEach(([start, end]) => {\n      const startLandmark = landmarks[start];\n      const endLandmark = landmarks[end];\n      if (startLandmark && endLandmark) {\n        ctx.beginPath();\n        ctx.moveTo(\n          startLandmark.x * canvas.width,\n          startLandmark.y * canvas.height,\n        );\n        ctx.lineTo(endLandmark.x * canvas.width, endLandmark.y * canvas.height);\n        ctx.stroke();\n      }\n    });\n  }, []);\n\n  const handleStop = useCallback(() => {\n    setIsActive(false);\n    onComplete(repsDataRef.current, allFeedbackRef.current);\n  }, [onComplete]);\n\n  if (isLoading) {\n    return (\n      <div\n        className=\"flex items-center justify-center h-screen bg-slate-900\"\n        data-oid=\"2hihyhk\"\n      >\n        <div className=\"text-center\" data-oid=\"oe.mfof\">\n          <div\n            className=\"w-16 h-16 border-4 border-blue-500 border-t-transparent rounded-full animate-spin mx-auto mb-4\"\n            data-oid=\"z.nf82_\"\n          ></div>\n          <p className=\"text-white text-lg\" data-oid=\"v0p15jg\">\n            Initializing camera and AI...\n          </p>\n        </div>\n      </div>\n    );\n  }\n\n  if (error) {\n    return (\n      <div\n        className=\"flex items-center justify-center h-screen bg-slate-900 p-4\"\n        data-oid=\"6jd8u80\"\n      >\n        <div className=\"text-center max-w-md\" data-oid=\"65y86by\">\n          <div\n            className=\"w-16 h-16 bg-red-500/20 rounded-full flex items-center justify-center mx-auto mb-4\"\n            data-oid=\"n:.p5_n\"\n          >\n            <svg\n              className=\"w-8 h-8 text-red-400\"\n              fill=\"none\"\n              stroke=\"currentColor\"\n              viewBox=\"0 0 24 24\"\n              data-oid=\"fr5k57q\"\n            >\n              <path\n                strokeLinecap=\"round\"\n                strokeLinejoin=\"round\"\n                strokeWidth={2}\n                d=\"M6 18L18 6M6 6l12 12\"\n                data-oid=\"7fb01ap\"\n              />\n            </svg>\n          </div>\n          <h2\n            className=\"text-xl font-semibold text-white mb-2\"\n            data-oid=\"4-66v:-\"\n          >\n            Setup Error\n          </h2>\n          <p className=\"text-gray-400 mb-4\" data-oid=\"giniyhg\">\n            {error}\n          </p>\n          <button\n            onClick={() => window.location.reload()}\n            className=\"px-6 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600\"\n            data-oid=\"jik9a5s\"\n          >\n            Try Again\n          </button>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div\n      className=\"relative h-screen bg-slate-900 overflow-hidden\"\n      data-oid=\"u21w:30\"\n    >\n      {/* Video Feed */}\n      <div className=\"relative w-full h-full\" data-oid=\"16zzk30\">\n        <video\n          ref={videoRef}\n          className=\"absolute inset-0 w-full h-full object-cover transform scale-x-[-1]\"\n          playsInline\n          muted\n          data-oid=\"sd-z8cc\"\n        />\n\n        <canvas\n          ref={canvasRef}\n          className=\"absolute inset-0 w-full h-full transform scale-x-[-1]\"\n          data-oid=\"d_1z418\"\n        />\n      </div>\n\n      {/* Overlay UI */}\n      <div className=\"absolute inset-0 pointer-events-none\" data-oid=\"asukeiz\">\n        {/* Top Bar */}\n        <div\n          className=\"absolute top-0 left-0 right-0 p-4 bg-gradient-to-b from-black/50 to-transparent\"\n          data-oid=\"agi5bm3\"\n        >\n          <div className=\"flex items-center justify-between\" data-oid=\"djx3bdv\">\n            <div\n              className=\"bg-black/50 backdrop-blur-sm px-4 py-2 rounded-full\"\n              data-oid=\"05:cv0_\"\n            >\n              <span\n                className=\"text-white text-sm font-medium\"\n                data-oid=\"qyhcmy6\"\n              >\n                Phase: {phase}\n              </span>\n            </div>\n            <div\n              className=\"bg-black/50 backdrop-blur-sm px-4 py-2 rounded-full\"\n              data-oid=\"tvyn3nu\"\n            >\n              <span\n                className=\"text-white text-sm font-medium\"\n                data-oid=\"vb58-dr\"\n              >\n                Reps: {repCount}\n              </span>\n            </div>\n          </div>\n        </div>\n\n        {/* Center - Rep Counter */}\n        <div\n          className=\"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2\"\n          data-oid=\"xet55vi\"\n        >\n          <div\n            className=\"text-8xl font-bold text-white drop-shadow-2xl\"\n            data-oid=\"282awy8\"\n          >\n            {repCount}\n          </div>\n        </div>\n\n        {/* Feedback Messages */}\n        <div\n          className=\"absolute top-24 left-1/2 transform -translate-x-1/2 w-full max-w-md px-4\"\n          data-oid=\"ga1lm7a\"\n        >\n          {currentFeedback.map((feedback, index) => (\n            <div\n              key={`${feedback.timestamp}-${index}`}\n              className={`mb-2 p-4 rounded-lg backdrop-blur-md animate-fade-in ${\n                feedback.severity === \"error\"\n                  ? \"bg-red-500/80\"\n                  : feedback.severity === \"warning\"\n                    ? \"bg-yellow-500/80\"\n                    : \"bg-green-500/80\"\n              }`}\n              data-oid=\"ykjn:0h\"\n            >\n              <p\n                className=\"text-white font-semibold text-center\"\n                data-oid=\"efjyr2t\"\n              >\n                {feedback.message}\n              </p>\n            </div>\n          ))}\n        </div>\n\n        {/* Bottom Controls */}\n        <div\n          className=\"absolute bottom-0 left-0 right-0 p-8 bg-gradient-to-t from-black/50 to-transparent\"\n          data-oid=\"uf8vhh0\"\n        >\n          <div\n            className=\"flex items-center justify-center gap-4\"\n            data-oid=\"8kjst_a\"\n          >\n            <button\n              onClick={handleStop}\n              className=\"pointer-events-auto px-8 py-4 bg-red-500 text-white font-semibold rounded-full hover:bg-red-600 transition-colors shadow-lg\"\n              data-oid=\"j:y.uze\"\n            >\n              End Session\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 962, "column": 0}, "map": {"version":3,"sources":["file:///home/gurban/Desktop/3_1/Project/AI-Fusion/frontend/src/lib/exercises.ts"],"sourcesContent":["import { Exercise, ExerciseType } from \"@/types/exercise\";\n\nexport const exercises: Record<ExerciseType, Exercise> = {\n  squat: {\n    id: \"squat\",\n    name: \"Squat\",\n    description:\n      \"Master the fundamental lower body movement pattern with proper depth and alignment.\",\n    cameraAngle: \"side\",\n    icon: \"ü¶µ\",\n    targetMuscles: [\"Quadriceps\", \"Glutes\", \"Hamstrings\", \"Core\"],\n    commonErrors: [\n      \"Knees caving inward\",\n      \"Excessive forward lean\",\n      \"Insufficient depth\",\n      \"Heels lifting off ground\",\n      \"Lower back rounding\",\n    ],\n  },\n  deadlift: {\n    id: \"deadlift\",\n    name: \"Deadlift / Hip Hinge\",\n    description:\n      \"Learn the hip hinge pattern essential for posterior chain development and injury prevention.\",\n    cameraAngle: \"side\",\n    icon: \"üí™\",\n    targetMuscles: [\"Hamstrings\", \"Glutes\", \"Lower Back\", \"Core\"],\n    commonErrors: [\n      \"Back rounding\",\n      \"Hips rising too fast\",\n      \"Bar drifting away from body\",\n      \"Knees locking too early\",\n      \"Improper breathing\",\n    ],\n  },\n  pushup: {\n    id: \"pushup\",\n    name: \"Push-Up\",\n    description:\n      \"Perfect your upper body pressing mechanics and core stability.\",\n    cameraAngle: \"side\",\n    icon: \"üí•\",\n    targetMuscles: [\"Chest\", \"Triceps\", \"Shoulders\", \"Core\"],\n    commonErrors: [\n      \"Sagging hips\",\n      \"Flaring elbows\",\n      \"Incomplete range of motion\",\n      \"Head dropping\",\n      \"Pike position\",\n    ],\n  },\n  row: {\n    id: \"row\",\n    name: \"Row\",\n    description:\n      \"Develop proper pulling mechanics and posterior shoulder strength.\",\n    cameraAngle: \"front\",\n    icon: \"üö£\",\n    targetMuscles: [\"Upper Back\", \"Lats\", \"Rhomboids\", \"Biceps\"],\n    commonErrors: [\n      \"Excessive momentum\",\n      \"Shoulder shrugging\",\n      \"Elbow flaring\",\n      \"Incomplete scapular retraction\",\n      \"Torso rotation\",\n    ],\n  },\n  \"overhead-press\": {\n    id: \"overhead-press\",\n    name: \"Overhead Press\",\n    description:\n      \"Build stable overhead pressing mechanics and shoulder health.\",\n    cameraAngle: \"front\",\n    icon: \"üèãÔ∏è\",\n    targetMuscles: [\"Shoulders\", \"Triceps\", \"Upper Chest\", \"Core\"],\n    commonErrors: [\n      \"Excessive lower back arch\",\n      \"Bar path not straight\",\n      \"Head not passing through\",\n      \"Core instability\",\n      \"Incomplete lockout\",\n    ],\n  },\n};\n\nexport const getExercise = (id: ExerciseType): Exercise => exercises[id];\n\nexport const getAllExercises = (): Exercise[] => Object.values(exercises);\n"],"names":[],"mappings":";;;;;;;;AAEO,MAAM,YAA4C;IACvD,OAAO;QACL,IAAI;QACJ,MAAM;QACN,aACE;QACF,aAAa;QACb,MAAM;QACN,eAAe;YAAC;YAAc;YAAU;YAAc;SAAO;QAC7D,cAAc;YACZ;YACA;YACA;YACA;YACA;SACD;IACH;IACA,UAAU;QACR,IAAI;QACJ,MAAM;QACN,aACE;QACF,aAAa;QACb,MAAM;QACN,eAAe;YAAC;YAAc;YAAU;YAAc;SAAO;QAC7D,cAAc;YACZ;YACA;YACA;YACA;YACA;SACD;IACH;IACA,QAAQ;QACN,IAAI;QACJ,MAAM;QACN,aACE;QACF,aAAa;QACb,MAAM;QACN,eAAe;YAAC;YAAS;YAAW;YAAa;SAAO;QACxD,cAAc;YACZ;YACA;YACA;YACA;YACA;SACD;IACH;IACA,KAAK;QACH,IAAI;QACJ,MAAM;QACN,aACE;QACF,aAAa;QACb,MAAM;QACN,eAAe;YAAC;YAAc;YAAQ;YAAa;SAAS;QAC5D,cAAc;YACZ;YACA;YACA;YACA;YACA;SACD;IACH;IACA,kBAAkB;QAChB,IAAI;QACJ,MAAM;QACN,aACE;QACF,aAAa;QACb,MAAM;QACN,eAAe;YAAC;YAAa;YAAW;YAAe;SAAO;QAC9D,cAAc;YACZ;YACA;YACA;YACA;YACA;SACD;IACH;AACF;AAEO,MAAM,cAAc,CAAC,KAA+B,SAAS,CAAC,GAAG;AAEjE,MAAM,kBAAkB,IAAkB,OAAO,MAAM,CAAC","debugId":null}},
    {"offset": {"line": 1078, "column": 0}, "map": {"version":3,"sources":["file:///home/gurban/Desktop/3_1/Project/AI-Fusion/frontend/src/app/workout/%5BexerciseId%5D/page.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState } from \"react\";\nimport React from \"react\";\nimport { useParams, useRouter } from \"next/navigation\";\nimport WorkoutCamera from \"@/components/WorkoutCamera\";\nimport { getExercise } from \"@/lib/exercises\";\nimport { ExerciseType, FormFeedback, RepData } from \"@/types/exercise\";\n\nexport default function WorkoutPage() {\n  const params = useParams();\n  const router = useRouter();\n  const exerciseId = params.exerciseId as ExerciseType;\n  const exercise = getExercise(exerciseId);\n\n  const [showInstructions, setShowInstructions] = useState(true);\n  const [mode, setMode] = useState<'camera' | 'upload'>(\"camera\");\n  const [uploading, setUploading] = useState(false);\n  const [feedback, setFeedback] = useState<FormFeedback[] | null>(null);\n  const [error, setError] = useState<string | null>(null);\n\n  const handleComplete = (reps: RepData[], feedback: FormFeedback[]) => {\n    // Store session data in sessionStorage\n    const sessionData = {\n      exerciseId,\n      reps,\n      feedback,\n      endTime: Date.now(),\n    };\n    sessionStorage.setItem(\"workoutSession\", JSON.stringify(sessionData));\n    router.push(\"/summary\");\n  };\n\n  if (showInstructions) {\n    return (\n      <div className=\"min-h-screen bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 flex items-center justify-center p-4\">\n        <div className=\"max-w-2xl w-full bg-slate-800/50 backdrop-blur-sm border border-slate-700 rounded-2xl p-8\">\n          {/* Exercise Info */}\n          <div className=\"text-center mb-8\" data-oid=\"rwd0uex\">\n            <div className=\"text-6xl mb-4\" data-oid=\"9qd7y5y\">\n              {exercise.icon}\n            </div>\n            <h1\n              className=\"text-3xl font-bold text-white mb-2\"\n              data-oid=\"o6cfqzt\"\n            >\n              {exercise.name}\n            </h1>\n            <p className=\"text-gray-400\" data-oid=\"80m1lwd\">\n              {exercise.description}\n            </p>\n          </div>\n\n          {/* Setup Instructions */}\n          <div className=\"space-y-6 mb-8\" data-oid=\"tgj8dg4\">\n            <div data-oid=\"krc5vi9\">\n              <h2\n                className=\"text-xl font-semibold text-white mb-4 flex items-center gap-2\"\n                data-oid=\"jzkh02q\"\n              >\n                <svg\n                  className=\"w-6 h-6 text-blue-400\"\n                  fill=\"none\"\n                  stroke=\"currentColor\"\n                  viewBox=\"0 0 24 24\"\n                  data-oid=\"j48-fet\"\n                >\n                  <path\n                    strokeLinecap=\"round\"\n                    strokeLinejoin=\"round\"\n                    strokeWidth={2}\n                    d=\"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z\"\n                    data-oid=\"1d4ci-x\"\n                  />\n\n                  <path\n                    strokeLinecap=\"round\"\n                    strokeLinejoin=\"round\"\n                    strokeWidth={2}\n                    d=\"M15 13a3 3 0 11-6 0 3 3 0 016 0z\"\n                    data-oid=\"k4yifzo\"\n                  />\n                </svg>\n                Camera Setup\n              </h2>\n              <div\n                className=\"bg-slate-900/50 rounded-lg p-4 space-y-2\"\n                data-oid=\"qk8y4.8\"\n              >\n                <p\n                  className=\"text-gray-300 flex items-start gap-2\"\n                  data-oid=\"frj-4lg\"\n                >\n                  <span\n                    className=\"text-blue-400 font-semibold\"\n                    data-oid=\"fg.eej4\"\n                  >\n                    ‚Ä¢\n                  </span>\n                  <span data-oid=\"gfryse2\">\n                    Position phone{\" \"}\n                    <strong className=\"text-white\" data-oid=\"3bzq-6n\">\n                      6-8 feet away\n                    </strong>{\" \"}\n                    at hip height\n                  </span>\n                </p>\n                <p\n                  className=\"text-gray-300 flex items-start gap-2\"\n                  data-oid=\"g-533hd\"\n                >\n                  <span\n                    className=\"text-blue-400 font-semibold\"\n                    data-oid=\"462ichl\"\n                  >\n                    ‚Ä¢\n                  </span>\n                  <span data-oid=\"2n2w2wc\">\n                    Use{\" \"}\n                    <strong className=\"text-white\" data-oid=\"2eojdxf\">\n                      {exercise.cameraAngle} view\n                    </strong>{\" \"}\n                    - your entire body should be visible\n                  </span>\n                </p>\n                <p\n                  className=\"text-gray-300 flex items-start gap-2\"\n                  data-oid=\"m:rb207\"\n                >\n                  <span\n                    className=\"text-blue-400 font-semibold\"\n                    data-oid=\"s-gz0xx\"\n                  >\n                    ‚Ä¢\n                  </span>\n                  <span data-oid=\"g:-ddwe\">\n                    Ensure good lighting and a clear background\n                  </span>\n                </p>\n                <p\n                  className=\"text-gray-300 flex items-start gap-2\"\n                  data-oid=\":20r.yd\"\n                >\n                  <span\n                    className=\"text-blue-400 font-semibold\"\n                    data-oid=\"bpnhmnu\"\n                  >\n                    ‚Ä¢\n                  </span>\n                  <span data-oid=\"sw2mc_l\">\n                    Grant camera permissions when prompted\n                  </span>\n                </p>\n              </div>\n            </div>\n\n            {/* Common Errors */}\n            <div data-oid=\"65nq_1j\">\n              <h2\n                className=\"text-xl font-semibold text-white mb-4 flex items-center gap-2\"\n                data-oid=\":-gaxew\"\n              >\n                <svg\n                  className=\"w-6 h-6 text-yellow-400\"\n                  fill=\"none\"\n                  stroke=\"currentColor\"\n                  viewBox=\"0 0 24 24\"\n                  data-oid=\"i5wpzaw\"\n                >\n                  <path\n                    strokeLinecap=\"round\"\n                    strokeLinejoin=\"round\"\n                    strokeWidth={2}\n                    d=\"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z\"\n                    data-oid=\"xue75f6\"\n                  />\n                </svg>\n                We'll Check For\n              </h2>\n              <div\n                className=\"bg-slate-900/50 rounded-lg p-4\"\n                data-oid=\"gkh3w8y\"\n              >\n                <ul className=\"space-y-2\" data-oid=\"rgmau6e\">\n                  {exercise.commonErrors.map((error, index) => (\n                    <li\n                      key={index}\n                      className=\"text-gray-300 flex items-start gap-2\"\n                      data-oid=\"r0g0xui\"\n                    >\n                      <span\n                        className=\"text-yellow-400 font-semibold\"\n                        data-oid=\"o3ya57m\"\n                      >\n                        ‚Ä¢\n                      </span>\n                      <span data-oid=\"f_zkh_b\">{error}</span>\n                    </li>\n                  ))}\n                </ul>\n              </div>\n            </div>\n          </div>\n\n          {/* Mode Selection */}\n          <div className=\"flex gap-4 mb-6\">\n            <button\n              className={`flex-1 px-6 py-4 rounded-lg font-semibold transition-colors ${mode === 'camera' ? 'bg-blue-500 text-white' : 'bg-slate-700 text-gray-300'}`}\n              onClick={() => setMode('camera')}\n            >\n              Use Camera\n            </button>\n            <button\n              className={`flex-1 px-6 py-4 rounded-lg font-semibold transition-colors ${mode === 'upload' ? 'bg-blue-500 text-white' : 'bg-slate-700 text-gray-300'}`}\n              onClick={() => setMode('upload')}\n            >\n              Upload Video\n            </button>\n          </div>\n          {/* Start Button */}\n          <div className=\"flex gap-4\">\n            <button\n              onClick={() => router.back()}\n              className=\"flex-1 px-6 py-4 bg-slate-700 text-white font-semibold rounded-lg hover:bg-slate-600 transition-colors\"\n            >\n              Back\n            </button>\n            <button\n              onClick={() => setShowInstructions(false)}\n              className=\"flex-1 px-6 py-4 bg-gradient-to-r from-blue-500 to-purple-600 text-white font-semibold rounded-lg hover:from-blue-600 hover:to-purple-700 transition-all duration-200 shadow-lg\"\n            >\n              Start\n            </button>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  // Main workout logic\n  if (mode === \"camera\") {\n    return (\n      <WorkoutCamera\n        exerciseId={exerciseId}\n        onComplete={handleComplete}\n      />\n    );\n  }\n\n  // Video upload mode\n  return (\n    <div className=\"min-h-screen flex flex-col items-center justify-center bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 p-4\">\n      <div className=\"max-w-xl w-full bg-slate-800/50 backdrop-blur-sm border border-slate-700 rounded-2xl p-8\">\n        <h2 className=\"text-2xl font-bold text-white mb-4 text-center\">Upload Your Exercise Video</h2>\n        <form\n          onSubmit={async (e) => {\n            e.preventDefault();\n            setError(null);\n            setFeedback(null);\n            setUploading(true);\n            const formData = new FormData(e.target as HTMLFormElement);\n            try {\n              const res = await fetch(\"/api/analyze-video\", {\n                method: \"POST\",\n                body: formData,\n              });\n              if (!res.ok) throw new Error(\"Failed to analyze video\");\n              const data = await res.json();\n              setFeedback(data.feedback || []);\n            } catch (err: any) {\n              setError(err.message || \"Unknown error\");\n            } finally {\n              setUploading(false);\n            }\n          }}\n        >\n          <input\n            type=\"file\"\n            name=\"video\"\n            accept=\"video/*\"\n            required\n            className=\"block w-full mb-4 text-gray-200\"\n          />\n          <input type=\"hidden\" name=\"exerciseId\" value={exerciseId} />\n          <button\n            type=\"submit\"\n            disabled={uploading}\n            className=\"w-full px-6 py-3 bg-blue-500 text-white font-semibold rounded-lg hover:bg-blue-600 transition-colors\"\n          >\n            {uploading ? \"Uploading...\" : \"Analyze Video\"}\n          </button>\n        </form>\n        {error && <div className=\"mt-4 text-red-400 text-center\">{error}</div>}\n        {feedback && (\n          <div className=\"mt-6\">\n            <h3 className=\"text-lg font-semibold text-white mb-2\">Feedback</h3>\n            <ul className=\"text-gray-300 space-y-2\">\n              {feedback.map((fb, idx) => (\n                <li key={idx}>{fb.message}</li>\n              ))}\n            </ul>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AAEA;AACA;AACA;AANA;;;;;;AASe,SAAS;IACtB,MAAM,SAAS,IAAA,2JAAS;IACxB,MAAM,SAAS,IAAA,2JAAS;IACxB,MAAM,aAAa,OAAO,UAAU;IACpC,MAAM,WAAW,IAAA,kJAAW,EAAC;IAE7B,MAAM,CAAC,kBAAkB,oBAAoB,GAAG,IAAA,6NAAQ,EAAC;IACzD,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,6NAAQ,EAAsB;IACtD,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,6NAAQ,EAAC;IAC3C,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,6NAAQ,EAAwB;IAChE,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,6NAAQ,EAAgB;IAElD,MAAM,iBAAiB,CAAC,MAAiB;QACvC,uCAAuC;QACvC,MAAM,cAAc;YAClB;YACA;YACA;YACA,SAAS,KAAK,GAAG;QACnB;QACA,eAAe,OAAO,CAAC,kBAAkB,KAAK,SAAS,CAAC;QACxD,OAAO,IAAI,CAAC;IACd;IAEA,IAAI,kBAAkB;QACpB,qBACE,0PAAC;YAAI,WAAU;sBACb,cAAA,0PAAC;gBAAI,WAAU;;kCAEb,0PAAC;wBAAI,WAAU;wBAAmB,YAAS;;0CACzC,0PAAC;gCAAI,WAAU;gCAAgB,YAAS;0CACrC,SAAS,IAAI;;;;;;0CAEhB,0PAAC;gCACC,WAAU;gCACV,YAAS;0CAER,SAAS,IAAI;;;;;;0CAEhB,0PAAC;gCAAE,WAAU;gCAAgB,YAAS;0CACnC,SAAS,WAAW;;;;;;;;;;;;kCAKzB,0PAAC;wBAAI,WAAU;wBAAiB,YAAS;;0CACvC,0PAAC;gCAAI,YAAS;;kDACZ,0PAAC;wCACC,WAAU;wCACV,YAAS;;0DAET,0PAAC;gDACC,WAAU;gDACV,MAAK;gDACL,QAAO;gDACP,SAAQ;gDACR,YAAS;;kEAET,0PAAC;wDACC,eAAc;wDACd,gBAAe;wDACf,aAAa;wDACb,GAAE;wDACF,YAAS;;;;;;kEAGX,0PAAC;wDACC,eAAc;wDACd,gBAAe;wDACf,aAAa;wDACb,GAAE;wDACF,YAAS;;;;;;;;;;;;4CAEP;;;;;;;kDAGR,0PAAC;wCACC,WAAU;wCACV,YAAS;;0DAET,0PAAC;gDACC,WAAU;gDACV,YAAS;;kEAET,0PAAC;wDACC,WAAU;wDACV,YAAS;kEACV;;;;;;kEAGD,0PAAC;wDAAK,YAAS;;4DAAU;4DACR;0EACf,0PAAC;gEAAO,WAAU;gEAAa,YAAS;0EAAU;;;;;;4DAExC;4DAAI;;;;;;;;;;;;;0DAIlB,0PAAC;gDACC,WAAU;gDACV,YAAS;;kEAET,0PAAC;wDACC,WAAU;wDACV,YAAS;kEACV;;;;;;kEAGD,0PAAC;wDAAK,YAAS;;4DAAU;4DACnB;0EACJ,0PAAC;gEAAO,WAAU;gEAAa,YAAS;;oEACrC,SAAS,WAAW;oEAAC;;;;;;;4DACd;4DAAI;;;;;;;;;;;;;0DAIlB,0PAAC;gDACC,WAAU;gDACV,YAAS;;kEAET,0PAAC;wDACC,WAAU;wDACV,YAAS;kEACV;;;;;;kEAGD,0PAAC;wDAAK,YAAS;kEAAU;;;;;;;;;;;;0DAI3B,0PAAC;gDACC,WAAU;gDACV,YAAS;;kEAET,0PAAC;wDACC,WAAU;wDACV,YAAS;kEACV;;;;;;kEAGD,0PAAC;wDAAK,YAAS;kEAAU;;;;;;;;;;;;;;;;;;;;;;;;0CAQ/B,0PAAC;gCAAI,YAAS;;kDACZ,0PAAC;wCACC,WAAU;wCACV,YAAS;;0DAET,0PAAC;gDACC,WAAU;gDACV,MAAK;gDACL,QAAO;gDACP,SAAQ;gDACR,YAAS;0DAET,cAAA,0PAAC;oDACC,eAAc;oDACd,gBAAe;oDACf,aAAa;oDACb,GAAE;oDACF,YAAS;;;;;;;;;;;4CAEP;;;;;;;kDAGR,0PAAC;wCACC,WAAU;wCACV,YAAS;kDAET,cAAA,0PAAC;4CAAG,WAAU;4CAAY,YAAS;sDAChC,SAAS,YAAY,CAAC,GAAG,CAAC,CAAC,OAAO,sBACjC,0PAAC;oDAEC,WAAU;oDACV,YAAS;;sEAET,0PAAC;4DACC,WAAU;4DACV,YAAS;sEACV;;;;;;sEAGD,0PAAC;4DAAK,YAAS;sEAAW;;;;;;;mDAVrB;;;;;;;;;;;;;;;;;;;;;;;;;;;kCAmBjB,0PAAC;wBAAI,WAAU;;0CACb,0PAAC;gCACC,WAAW,CAAC,4DAA4D,EAAE,SAAS,WAAW,2BAA2B,8BAA8B;gCACvJ,SAAS,IAAM,QAAQ;0CACxB;;;;;;0CAGD,0PAAC;gCACC,WAAW,CAAC,4DAA4D,EAAE,SAAS,WAAW,2BAA2B,8BAA8B;gCACvJ,SAAS,IAAM,QAAQ;0CACxB;;;;;;;;;;;;kCAKH,0PAAC;wBAAI,WAAU;;0CACb,0PAAC;gCACC,SAAS,IAAM,OAAO,IAAI;gCAC1B,WAAU;0CACX;;;;;;0CAGD,0PAAC;gCACC,SAAS,IAAM,oBAAoB;gCACnC,WAAU;0CACX;;;;;;;;;;;;;;;;;;;;;;;IAOX;IAEA,qBAAqB;IACrB,IAAI,SAAS,UAAU;QACrB,qBACE,0PAAC,0JAAa;YACZ,YAAY;YACZ,YAAY;;;;;;IAGlB;IAEA,oBAAoB;IACpB,qBACE,0PAAC;QAAI,WAAU;kBACb,cAAA,0PAAC;YAAI,WAAU;;8BACb,0PAAC;oBAAG,WAAU;8BAAiD;;;;;;8BAC/D,0PAAC;oBACC,UAAU,OAAO;wBACf,EAAE,cAAc;wBAChB,SAAS;wBACT,YAAY;wBACZ,aAAa;wBACb,MAAM,WAAW,IAAI,SAAS,EAAE,MAAM;wBACtC,IAAI;4BACF,MAAM,MAAM,MAAM,MAAM,sBAAsB;gCAC5C,QAAQ;gCACR,MAAM;4BACR;4BACA,IAAI,CAAC,IAAI,EAAE,EAAE,MAAM,IAAI,MAAM;4BAC7B,MAAM,OAAO,MAAM,IAAI,IAAI;4BAC3B,YAAY,KAAK,QAAQ,IAAI,EAAE;wBACjC,EAAE,OAAO,KAAU;4BACjB,SAAS,IAAI,OAAO,IAAI;wBAC1B,SAAU;4BACR,aAAa;wBACf;oBACF;;sCAEA,0PAAC;4BACC,MAAK;4BACL,MAAK;4BACL,QAAO;4BACP,QAAQ;4BACR,WAAU;;;;;;sCAEZ,0PAAC;4BAAM,MAAK;4BAAS,MAAK;4BAAa,OAAO;;;;;;sCAC9C,0PAAC;4BACC,MAAK;4BACL,UAAU;4BACV,WAAU;sCAET,YAAY,iBAAiB;;;;;;;;;;;;gBAGjC,uBAAS,0PAAC;oBAAI,WAAU;8BAAiC;;;;;;gBACzD,0BACC,0PAAC;oBAAI,WAAU;;sCACb,0PAAC;4BAAG,WAAU;sCAAwC;;;;;;sCACtD,0PAAC;4BAAG,WAAU;sCACX,SAAS,GAAG,CAAC,CAAC,IAAI,oBACjB,0PAAC;8CAAc,GAAG,OAAO;mCAAhB;;;;;;;;;;;;;;;;;;;;;;;;;;;AAQzB","debugId":null}}]
}